generator client {
  provider = "prisma-client-js"
  output   = "../lib/generated/prisma"
  binaryTargets = ["native", "windows", "rhel-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


model User {
  id        Int      @id @default(autoincrement())
  name      String
  email     String   @unique
  createdAt DateTime @default(now())
  password  String
  updatedAt DateTime @updatedAt
  role      String

  communities Community[]
}

model PortoJenis {
  id         Int          @id @default(autoincrement())
  name       String
  status     Status
  createdAt  DateTime     @default(now())
  updatedAt  DateTime
  Portofolio Portofolio[]
}

model Portofolio {
  id           Int             @id @default(autoincrement())
  portoJenisId Int
  title        String
  image        String
  url          String
  description  String
  isPrimary    Boolean
  category     String
  status       PortfolioStatus
  createdAt    DateTime        @default(now())
  updatedAt    DateTime
  PortoJenis   PortoJenis      @relation(fields: [portoJenisId], references: [id])
}

model Sertifikat {
  id        Int      @id @default(autoincrement())
  name      String
  image     String
  status    Status
  createdAt DateTime @default(now())
  updatedAt DateTime
}

model Skill {
  id        Int         @id @default(autoincrement())
  name      String
  image     String
  bagan     Int
  status    SkillStatus
  createdAt DateTime    @default(now())
  updatedAt DateTime
}

model Community {
  id        Int       @id @default(autoincrement())
  userId    Int?                          // bisa null
  user      User?     @relation(fields: [userId], references: [id])
  message   String                        // isi pesan / deskripsi
  status    CommunityStatus @default(active)

  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
}

enum CommunityStatus {
  active
  draft
  archived
}

enum PortfolioStatus {
  active
  ongoing
  draft
}

enum SkillStatus {
  active
  draft
}

enum Status {
  active
  draft
}
